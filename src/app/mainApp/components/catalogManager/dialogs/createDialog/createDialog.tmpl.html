<div layout="column"
     layout-align="center stretch"
     cg-busy="{promise:vm.createLoader, message:vm.dialog.loading, templateUrl:'app/mainApp/directives/loading.tmpl.html'}">
    <md-toolbar layout="row"
                layout-align="space-between center">
        <div ng-if="vm.dialog.title" class="md-title">{{vm.dialog.title}}</div>
        <div ng-if="!vm.dialog.title" class="md-title">Create element</div>
        <md-button class="md-icon-button" ng-click="vm.cancel()" aria-label="cancel">
            <md-icon md-font-icon="zmdi zmdi-close"></md-icon>
        </md-button>
    </md-toolbar>

    <md-content layout="column"
                layout-padding
                layout-align="center stretch">
        <form name="createForm"
              ng-submit="vm.create(vm.objectToCreate)">
            <div layout="column"
                 layout-align="center stretch"
                 ng-repeat="field in vm.fields">
                <section ng-if="field['type']!=='color' && field['type']!=='fileUploader'">
                    <md-input-container class="md-block">
                        <!--Field label selection depending on the parameters given-->
                        <label ng-if="field['label']">{{field['label']}}</label>
                        <label ng-if="!field['label']">{{field['model']}}</label>
                        <input ng-required="field.required"
                               type="{{field.type}}"
                               name="{{field.model}}"
                               min="{{field.min}}"
                               max="{{field.max}}"
                               ng-pattern="field['validations'].regex"
                               ng-model="vm.objectToCreate[field.model]" />
                        <div ng-messages="createForm[field.model].$error">
                            <div ng-message="required">{{field.validations.errors.required}}</div>
                            <div ng-message="pattern">{{field.validations.errors.regex}}</div>
                        </div>
                    </md-input-container>
                </section>
            </div>
        </form>
    </md-content>

    <md-actions layout="row"
                layout-align="space-between center">
        <md-button ng-click="vm.cancel()"
                   class="md-warn md-raised">
            <div layout="row" layout-align="center center">
                <md-icon md-font-icon="fa fa-close"></md-icon>
                <div ng-if="vm.dialog.cancelButton" hide-xs hide-sm>{{vm.dialog.cancelButton}}</div>
                <div ng-if="!vm.dialog.cancelButton" hide-xs hide-sm>Cancel</div>
            </div>
        </md-button>
        <md-button ng-click="vm.create(vm.objectToCreate)"
                   ng-disabled="createForm.$invalid"
                   class="md-primary md-raised">
            <div layout="row" layout-align="center center">
                <md-icon md-font-icon="fa fa-trash"></md-icon>
                <div ng-if="vm.dialog.okButton" hide-xs hide-sm>{{vm.dialog.okButton}}</div>
                <div ng-if="!vm.dialog.okButton" hide-xs hide-sm>Ok</div>
            </div>
        </md-button>
    </md-actions>
</div>
