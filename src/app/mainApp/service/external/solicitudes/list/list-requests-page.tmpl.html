<div class="bg-01"
     layout="column"
     layout-align="center stretch">

    <div cg-busy="{promise:vm.loadingPromise, message:'Cargando solicitudes...'}">
        <!--<md-card layout="column" layout-align="center center">-->
            <!--<h2 translate>REQUESTS.LIST.TITLE</h2>-->
        <!--</md-card>-->

        <md-card layout="column"
                 layout-padding
                 layout-align="center stretch">

            <div layout="row"
                 layout-align="space-around center"
                 layout-align-xs="center stretch"
                 layout-xs="column">

                <div layout="column" ng-if="vm.lastKindFilter != 'Abierta'">
                    <span translate>REQUESTS.LIST.OPEN</span>
                    <div ng-click="vm.listRequests('Abierta')"
                         class="Abierta"></div>
                </div>
                <div layout="column" ng-if="vm.lastKindFilter != 'En_proceso'">
                    <span translate>REQUESTS.LIST.IN_PROCESS</span>
                    <div ng-click="vm.listRequests('En_proceso')"
                         class="En_proceso"></div>
                </div>
                <div layout="column" ng-if="vm.lastKindFilter != 'Atendida'">
                    <span translate>REQUESTS.LIST.ATTENDED</span>
                    <div ng-click="vm.listRequests('Atendida')"
                         class="Atendida"></div>
                </div>
                <div layout="column" ng-if="vm.lastKindFilter != 'Cancelada'">
                    <span translate>REQUESTS.LIST.CANCELED</span>
                    <div ng-click="vm.listRequests('Cancelada')"
                         class="Cancelada"></div>
                </div>
                <div layout="column" ng-if="vm.lastKindFilter != 'Todo'">
                    <span translate>REQUESTS.LIST.ALL</span>
                    <div ng-click="vm.listRequests('Todo')"
                         class="Todo"></div>
                </div>
            </div>
        </md-card>
        <md-card layout="column"
                 layout-padding
                 layout-align="center stretch">

            <div layout="row"
                 layout-align="space-around center"
                 layout-align-xs="center stretch"
                 layout-xs="column">
                <span>Listado de </span>
                <div layout="column" ng-if="vm.lastKindFilter == 'Abierta'">
                    <span translate>REQUESTS.LIST.OPEN</span>
                    <div class="Abierta"></div>
                </div>
                <div layout="column" ng-if="vm.lastKindFilter == 'En_proceso'">
                    <span translate>REQUESTS.LIST.IN_PROCESS</span>
                    <div class="En_proceso"></div>
                </div>
                <div layout="column" ng-if="vm.lastKindFilter == 'Atendida'">
                    <span translate>REQUESTS.LIST.ATTENDED</span>
                    <div class="Atendida"></div>
                </div>
                <div layout="column" ng-if="vm.lastKindFilter == 'Cancelada'">
                    <span translate>REQUESTS.LIST.CANCELED</span>
                    <div class="Cancelada"></div>
                </div>
                <div layout="column" ng-if="vm.lastKindFilter == 'Todo'">
                    <span translate>REQUESTS.LIST.ALL</span>
                    <div class="Todo"></div>
                </div>
            </div>
        </md-card>
        <md-card layout="column"
                 layout-padding
                 layout-align="center stretch"
                 ng-if="vm.requests.length == 0">

            <div layout="row"
                 layout-align="space-around center"
                 layout-align-xs="center stretch"
                 layout-xs="column">
                <span translate>SALEPOINT_REQUEST.ASSIGN.NO_RESULTS</span>
            </div>
        </md-card>
    </div>

    <div class="virtualRepeatScroll-400"
        cg-busy="{promise:vm.getReportPromise, message:'Generando reporte...'}"
        ng-if="vm.requests">

        <md-card
            layout="column"
            ng-repeat="request in (vm.requests | orderBy:'-fecha')"
            layout-gt-xs="row"
            ng-click="vm.selectRequest(request)"
            layout-align="space-around center">
            <div layout="column" layout-align="center center">
                <h3 translate>REQUESTS.LIST.FOLIO</h3>
                <span>{{request.id}}</span>
            </div>
            <div layout="column" layout-align="center center">
                <h3 translate>REQUESTS.LIST.STATUS</h3>
                <div class="{{request.status}}">
                </div>
            </div>
            <div layout="column" layout-align="center center">
                <h3 translate>REQUESTS.LIST.DATE</h3>
                <span>{{request.fecha | moment:'DD/MM/YYYY hh:mm:ss'}}</span>
            </div>
            <div layout="column" layout-align="center center">
                <md-button aria-label="fab button"
                           ng-click="vm.downloadReport(request.id, $event); $event.stopPropagation();"
                           class="md-raised md-primary">
                    <md-icon md-font-icon="fa fa-file-pdf-o"></md-icon>
                </md-button>
            </div>
        </md-card>

    </div>
    <div layout-padding layout="row" layout-align="space-between center">
        <md-button class="md-primary md-raised"
                   ng-disabled="vm.allRequests.previous == null"
                   ng-click="vm.prev()">
            <div layout="row" layout-align="center center">
                <md-icon md-font-icon="fa fa-chevron-left"></md-icon>
                <div hide-xs hide-sm>
                    Anterior
                </div>
            </div>
        </md-button>

        <md-button class="md-primary md-raised"
                   ng-disabled="vm.allRequests.next == null"
                   ng-click="vm.sig()">
            <div layout="row" layout-align="center center">
                <div hide-xs hide-sm>
                    Siguiente
                </div>
                <md-icon md-font-icon="fa fa-chevron-right"></md-icon>
            </div>
        </md-button>
    </div>
</div>
