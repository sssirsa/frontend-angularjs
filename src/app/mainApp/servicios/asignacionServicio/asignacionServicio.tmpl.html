<div layout="column">
    <md-card layout="column" layout-align="center center">
        <h2 translate>SALEPOINT_REQUEST.ASSIGN.TITLE</h2>
    </md-card>
    <md-card layout="column"
             cg-busy="{promise:vm.loadingPromise,templateUrl:'app/mainApp/directives/loading_repeater.tmpl.html',wrapperClass:'cg-busy cg-busy-animation'}"
             layout-align="center center">
        <md-input-container flex="100" flex-gt-md="50" class="md-block">
            <label translate>SALEPOINT_REQUEST.ASSIGN.LABELS.KIND</label>
            <md-select name="selectSalePointType"
                       md-on-close="vm.listSalePoints()"
                       ng-model="vm.selectedKind">
                <md-option ng-repeat="option in vm.salePointKinds"
                           value="{{option.id}}">
                    {{option.value}}
                </md-option>
            </md-select>
            <div ng-if="!vm.selectedKind">
                <span translate>SALEPOINT_REQUEST.ASSIGN.NO_SELECTION</span>
            </div>
            <div ng-if="vm.selectedKind && !vm.salePoints">
                <span translate>SALEPOINT_REQUEST.ASSIGN.NO_RESULTS</span>
            </div>
        </md-input-container>
    </md-card>
    <div
        ng-if="vm.salePoints">
        <md-card
            layout="column"
            ng-repeat="salePoint in vm.salePoints"
            layout-gt-md="row"
            ng-click="vm.selectSalePoint(salePoint)"
            layout-align="space-around center">
            <md-icon md-svg-icon="assets/images/punto_venta.svg" class="avatar"></md-icon>
            <div layout="column" >
                <div layout="row">
                    <div layout="column" layout-align="center center">
                        <h4 translate>SALEPOINT_REQUEST.ASSIGN.LABELS.FOLIO</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 translate>:</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4>{{salePoint.folio}}</h4>
                    </div>
                </div>
                <div layout="row">
                    <div layout="column" layout-align="center center">
                        <h4 translate>SALEPOINT_REQUEST.ASSIGN.LABELS.JOB_KIND</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 translate>:</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4>{{salePoint.tipo_trabajo}}</h4>
                    </div>
                </div>

                <div layout="row">
                    <div layout="column" layout-align="center center">
                        <h4 translate>SALEPOINT_REQUEST.ASSIGN.LABELS.DATE</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 translate>:</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4>{{salePoint.fecha_creacion | moment:'DD/MM/YYYY hh:mm:ss'}}</h4>
                    </div>
                </div>
            </div>

            <div layout="column" >
                <div layout="row">
                    <div layout="column" layout-align="center center">
                        <h4 translate>SALEPOINT_REQUEST.ASSIGN.LABELS.ROUTE</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 translate>:</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4>{{salePoint.route}}</h4>
                    </div>
                </div>
                <div layout="row">
                    <div layout="column" layout-align="center center">
                        <h4 translate>SALEPOINT_REQUEST.ASSIGN.LABELS.STORE</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 translate>:</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4>{{salePoint.establecimiento_info.nombre_establecimiento}}</h4>
                    </div>
                </div>

                <div layout="row">
                    <div layout="column" layout-align="center center">
                        <h4 translate>SALEPOINT_REQUEST.ASSIGN.LABELS.STATE</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 translate>:</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 ng-if="salePoint.establecimiento_info.localidad.municipio">{{salePoint.establecimiento_info.localidad.municipio.estado.nombre}}</h4>
                        <h4 ng-if="!salePoint.establecimiento_info.localidad.municipio">No Asignado</h4>
                    </div>
                </div>
            </div>

            <div layout="column" >
                <div layout="row">
                    <div layout="column" layout-align="center center">
                        <h4 translate>SALEPOINT_REQUEST.ASSIGN.LABELS.MUN</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 translate>:</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 ng-if="salePoint.establecimiento_info.localidad.municipio">{{salePoint.establecimiento_info.localidad.municipio.nombre}}</h4>
                        <h4 ng-if="!salePoint.establecimiento_info.localidad.municipio">No Asignado</h4>

                    </div>
                </div>
                <div layout="row">
                    <div layout="column" layout-align="center center">
                        <h4 translate>SALEPOINT_REQUEST.ASSIGN.LABELS.LOCAL</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 translate>:</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4>{{salePoint.establecimiento_info.localidad.nombre}}</h4>
                    </div>
                </div>

                <div layout="row">
                    <div layout="column" layout-align="center center">
                        <h4 translate>SALEPOINT_REQUEST.ASSIGN.LABELS.CP</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 translate>:</h4>
                    </div>
                    <div layout="column" layout-align="center center">
                        <h4 ng-if="salePoint.establecimiento_info.localidad.codigo_postal">{{salePoint.establecimiento_info.localidad.codigo_postal}}</h4>
                        <h4 ng-if="!salePoint.establecimiento_info.localidad.codigo_postal">No Asignado</h4>
                    </div>
                </div>
            </div>

            <div layout="column" layout-align="center center" ng-if="vm.selectedKind == 'pending' ">
                <md-button aria-label="fab button"
                           ng-click= "$event.stopPropagation(); vm.Assing(salePoint)"
                           class="md-raised md-primary">
                    <md-icon md-font-icon="zmdi zmdi-accounts-list-alt"></md-icon>
                </md-button>
            </div>

        </md-card>
    </div>
</div>
